---
title: "Analisis Data Titanic: Faktor Keselamatan"
author: "Defa Danuarta"
date: "2025-05-22"
output: html_document
params:
  
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
```

```{r library, include=FALSE}
library(ggplot2)
library(plotly)
library(dplyr)
```

# **Definisi** {.tabset}

```{r}
df <- read.csv("latsol_titanic.csv")
```

---

#### **Data Error & Handling: Missing Value**

Sebelum menjawab beberapa pertanyaan untuk analisa data, pada tahap ini akan di cek terlebih dahulu untuk missing valuenya

```{r}
colSums(is.na(df))
```
ditemukan adanya data error yaitu missing value pada kolom age, dimana pada tahap ini missing value akan dihapus untuk melanjutkan analisa.  

Menghapus missing value dengan: na.omit(df)

```{r}
df <- na.omit(df)

colSums(is.na(df))
```
Berdasarkan hasil diatas, dapat diketahui bahwa missing value, khususnya pada kolom Age sudah teratasi

---  

---

#### **Data Error & Handling: Inconsistent Data**

Data yang tidak konsisten akan dicari pada tahap ini untuk membersihkan eror pada data. Hal ini dilakukan dengan cara mengecek setiap nilai unique di categorical variable khususnya pada kolom "Sex" dan "Embarked".

```{r}
selected_col <- c("Sex", "Embarked")
sapply(df[selected_col], unique)
```
ditemukan adanya data error pada kolom Embarked, dimana "" akan dihapus untuk melanjutkan analisa.  

```{r}
df <- df[df$Embarked != "", ]
sapply(df[selected_col], unique)
```
Berdasarkan hasil diatas, dapat diketahui bahwa inconsistent data, khususnya pada kolom Embarked sudah teratasi

---

<!-- Tab 1 --->
## **Usia & Kelas Tiket**

#### **Distribusi Usia dengan Kelas Tiket**

---

Tab ini akan menjelaskan distribusi terkait usia dengan kelas tiket, dimana kelas tiket terbagi menjadi 3, yaitu: `r unique(df$Pclass)`, dimana pada tab ini akan menjawab pertanyaan berikut:  

1. Bagaimana perbedaan usia penumpang di ketiga kelas tiket Titanic?  
2. Analisis dan bandingkan usia rata-rata serta sebaran usia penumpang di kelas 1, 2, dan 3!  
3. Kelas mana yang penumpangnya paling tua/muda?  

##### **Plotting Distibusi Usia dengan Kelas Tiket**

```{r}
distribusi_usia_per_kls <- ggplot(df, aes(x = Pclass, y = Age, fill = factor(Pclass)))+
  geom_boxplot()+
  labs(
    title = "Distribusi usia per setiap kelas",
    x = "Kelas Tiket",
    y = "Umur"
  )+
  scale_x_discrete(labels = NULL)
ggplotly(distribusi_usia_per_kls)

```

Berdasarkan hasil dari visualisasi diatas, Persebaran tervisualisasikan cukup tinggi dimana umur pemumpang yang memiliki tiket kelas satu berada pada rentang umur 27 tahun hingga 49 tahun. Pada tiket kelas 2, persebaran umurnya dimulai di antara umur 23 hingga 26 tahun. Tidak hanya itu adanya outlier yang ditemukan pada umur seseorang di angka 0,67(6 bulan 7 hari) hingga 3 tahun, dan umur 57 hingga 70 tahun pada kelas 2. Pada kelas ke-3,umur populasi penumpang ada diantara 18 hingga 32 tahun. Hal ini menjawab pertanyaan 1 sekaligus pertanyaan 3 dimana kebanyakan penumpang paling tua berada pada kelas 1, dan peumpang dengan rentang umur paling muda ada pada kelas 3. 

pernyataan diatas juga dibuktikan dengan hasil analisa statistik dibawah ini:

```{r}
stat_summary <- df %>%
  group_by(Pclass) %>%
  summarise(
    Median_Age = median(Age),
    Mean_Age = mean(Age),
    SD_Age = sd(Age),
    Count = n()
  )
print(stat_summary)
```
Pada hasil analisa statistik diatas dapat diketahui bahwa rata rata umur paling tua berada pada kelas 1 dengan rata-rata umur di 38,10554 tahun, dan yang paling muda kebanyakan ada di kelas 3 dengan rata rata umur di angka 25.14062 tahun. sedangkan pada kelas 2 berisikan orang orang yang memiliki rentang umur yang muda dan tidak terlalu tua.

## **Usia & Tingkat keselamatan**

Tab ini akan menjelaskan hubungan antara umur dengan tingkat keselamatan, dimana pada tab ini akan menjawab pertanyaan berikut: 

1. Apakah usia memengaruhi peluang selamat penumpang?  
2. Bagaimana pola ini berbeda antara penumpang laki-laki dan perempuan?  



##### **Plotting Hubungan Usia dengan Tingkat keselamatan**
```{r}
usia_dengan_keselamatan <- ggplot(df, aes(x = Survived, y = Age, fill = factor(Survived)))+
  geom_boxplot()+
  labs(
    title = "Hubungan tingkat keselamatan dengan Usia",
    x = "Keselamatan",
    y = "Umur"
  )+
  scale_x_discrete(labels = c("0" = "Tidak Selamat", "1" = "Selamat"))
  
ggplotly(usia_dengan_keselamatan)
```

Berdasarkan hasil dari visualisasi diatas, dapat diketahui bahwa tingkat keselamatan penumpang pada kapal titanic ada pada rentang umur 19 hingga 36 tahun. Hal ini masuk akal dimana pada peristiwa nyatanya, anak anak dan perempuan didahulukan untuk evakuasi kapal. Terdapat ourlier yang berumur 62, 62 dan, 80 dimana hal ini bisa saja terjadi karena adanya kesalahan pendataan dan kesalahan pada peristiwa nyatanya. Usia sangatlah mempengaruhi keselamatan penumpang karena secara alami seseorang yang lebih muda dapat bertahan hidup pada kondisi ekstrim lebih lama dari orang yang tua. Umur orang orang yang tidak selamat ada pada rentang 21 hingga 39, dimana hal ini mungkin saja dikarenakan gendernya laki laki dan juga banyaknya penumpang yg tidak mendapatkan kesempatan evakuasi.

```{r}
sex_dengan_keselamatan <- ggplot(df, aes(x = factor(Survived), y = Sex)) +
  geom_count(aes(size = ..n.., color = factor(Survived))) +
  labs(
    title = "Jumlah Penumpang Berdasarkan Keselamatan dan Jenis Kelamin",
    x = "Keselamatan",
    y = "Jenis Kelamin"
  ) +
  scale_x_discrete(labels = c("0" = "Tidak Selamat", "1" = "Selamat")) +
  scale_size_area(max_size = 20) +
  theme_minimal()

ggplotly(sex_dengan_keselamatan)
```

Dapat dilihat hasilnya bahwa banyaknya penumpang yang tidak selamat adalah laki laki dan yang selamat kebanyakan perempuan.